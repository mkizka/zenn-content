---
title: "è‡ªåˆ†ã®ãŸã‚ã®ESLintè¨­å®šã‚’Flat configã§ä½œã‚‹"
emoji: "ğŸ§¶"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: ["eslint", "typescript"]
published: false
---

ESLintã®v9.0.0ã§ã¯Flat config(eslint.config.js)ãŒãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã«ãªã‚Šã¾ã—ãŸã€‚ã“ã‚Œã¾ã§ã®.eslintrcã®å½¢å¼ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚‚ä½¿ãˆã¾ã™ãŒã€`ESLINT_USE_FLAT_CONFIG `ç’°å¢ƒå¤‰æ•°ã‚’è¨­å®šã™ã‚‹å¿…è¦ãŒã‚ã‚‹ã‚ˆã†ã§ã™ã€‚

https://eslint.org/blog/2024/04/eslint-v9.0.0-released/

ã“ã‚Œã‚’æ©Ÿã«Flat configã‚’ä½¿ã£ã¦ã¿ã‚ˆã†ã¨æ€ã„ã€ã•ã‚‰ã«[Sharable Config](https://eslint.org/docs/latest/extend/shareable-configs)ã¨ã—ã¦å…¬é–‹ã—ãŸã®ã§ã‚„ã£ãŸã“ã¨ã‚’ã¾ã¨ã‚ã¾ã™ã€‚

Flat configã®æ›¸ãæ–¹ã‚„ç§»è¡Œæ–¹æ³•ã¯ã™ã§ã«ä»–ã®è¨˜äº‹ã‚„å…¬å¼ã®ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã‚¬ã‚¤ãƒ‰ãŒã‚ã‚‹ã®ã§ã€Sharable Configã¨ã—ã¦å¿…è¦ã ã£ãŸã“ã¨ã‚’ä¸­å¿ƒã«è¨˜è¼‰ã—ã¾ã™ã€‚


## ä½œæˆã—ãŸãƒ©ã‚¤ãƒ–ãƒ©ãƒª

https://github.com/mkizka/eslint-config

## ä½¿ç”¨ã—ãŸãƒ—ãƒ©ã‚°ã‚¤ãƒ³

- [typescript-eslint](https://typescript-eslint.io/)
  - TypeScriptç”¨ã®ãƒ«ãƒ¼ãƒ«ã‚»ãƒƒãƒˆ
  - ä»¥å‰ã¯@typescript-eslint/eslint-pluginã¨ã„ã†åå‰ã§ã—ãŸãŒã€Flat configã®å ´åˆã¯ã“ã¡ã‚‰
- [eslint-plugin-simple-import-sort](https://www.npmjs.com/package/eslint-plugin-simple-import-sort)
  - importã®é †ç•ªã‚’ã„ã„æ„Ÿã˜ã«æ•´ç†ã—ã¦ãã‚Œã‚‹ãƒ«ãƒ¼ãƒ«
- [eslint-plugin-unused-imports](https://www.npmjs.com/package/eslint-plugin-unused-imports)
  - ä½¿ã£ã¦ã„ãªã„importæ–‡ã‚’å‰Šé™¤ã—ã¦ãã‚Œã‚‹ãƒ«ãƒ¼ãƒ«
- [eslint-plugin-eqeqeq-fix](https://www.npmjs.com/package/eslint-plugin-eqeqeq-fix)
  - `==`ã‚’`===`ã«è‡ªå‹•ä¿®æ­£ã—ã¦ãã‚Œã‚‹ãƒ«ãƒ¼ãƒ«
- [@dword-design/eslint-plugin-import-alias](https://www.npmjs.com/package/@dword-design/eslint-plugin-import-alias)
  - importã®ã‚¨ã‚¤ãƒªã‚¢ã‚¹(`@/...`)ã‚’ä½¿ã†ã‚ˆã†ã«è‡ªå‹•ä¿®æ­£ã—ã¦ãã‚Œã‚‹ãƒ«ãƒ¼ãƒ«


## 1. typescript-eslintã‚’ä½¿ã£ã¦åŸºæœ¬çš„ãªè¨­å®šã‚’æ›¸ã

Flat configã¯ã“ã®ã‚ˆã†ã«é…åˆ—ã§æ›¸ãã¾ã™ã€‚

```js
export default [
  {
    rules: {
      "no-unused-vars": "error",
      "no-undef": "error"
    }
  }
];
```

ã“ã‚Œã§ã‚‚è‰¯ã„ã®ã§ã™ãŒå‹ãŒã‚ã‚‹ã¨ä¾¿åˆ©ã§ã™ã€‚typescript-eslintã§ã¯`tseslint.config`ã¨ã„ã†ã“ã®é…åˆ—éƒ¨åˆ†ã«ç›¸å½“ã™ã‚‹å‹ã‚’æä¾›ã—ã¦ãã‚Œã‚‹é–¢æ•°ã‚’ä½¿ç”¨ã§ãã¾ã™([ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ](https://typescript-eslint.io/getting-started))ã€‚

```js
import eslint from '@eslint/js';
import tseslint from 'typescript-eslint';

export default tseslint.config(
  eslint.configs.recommended,
  ...tseslint.configs.recommended,
);
```

ã“ã‚Œã‚’ãƒ™ãƒ¼ã‚¹ã«è¨­å®šã‚’è¿½åŠ ã—ã¦ã„ãã‚ˆã†ãªæ›¸ãæ–¹ã§é€²ã‚ã¦ã„ãã¾ã—ãŸã€‚

### tseslint.configã¨ã¯

ã“ã“ã§ç™»å ´ã™ã‚‹`tseslint.config`ã¯åŸºæœ¬çš„ã«ã¯å—ã‘å–ã£ãŸå¼•æ•°ã‚’é…åˆ—ã«ã—ã¦è¿”ã™ã ã‘ã®é–¢æ•°ã§ã™ãŒã€ã•ã‚‰ã«`extends`ã¨ã„ã†ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ãŒä½¿ç”¨ã§ãã¾ã™ã€‚

:::message
ã“ã®`extends`ã¯.eslintrcã«ç™»å ´ã™ã‚‹extendsã¨ã¯åˆ¥ã®ã‚‚ã®ã§ã™ã€‚
:::

ã“ã®`extends`ã¯ä»¥ä¸‹ã®ã‚ˆã†ã«ä½¿ç”¨ã—ã¾ã™ã€‚

```js
export default tseslint.config({
  files: ['**/*.ts'],
  extends: [
    eslint.configs.recommended,
    ...tseslint.configs.recommended,
  ],
  rules: {
    '@typescript-eslint/array-type': 'error',
    '@typescript-eslint/consistent-type-imports': 'error',
  },
});
```

ã“ã‚Œã¯ä»¥ä¸‹ã¨åŒç­‰ã«ãªã‚Šã¾ã™ã€‚

```js
export default [
  {
    files: ['**/*.ts'],
    rules: {
      // eslint.configs.recommendedãŒæŒã£ã¦ã„ã‚‹ãŸãã•ã‚“ã®ãƒ«ãƒ¼ãƒ«
    }
  }
   {
    files: ['**/*.ts'],
    rules: {
      // tseslint.configs.recommendedãŒæŒã£ã¦ã„ã‚‹ãŸãã•ã‚“ã®ãƒ«ãƒ¼ãƒ«
    }
  }
  // ãã®ä»–ã®tseslint.configs.recommendedã®ãƒ«ãƒ¼ãƒ«(çœç•¥)
  {
    files: ['**/*.ts'],
    rules: {
      // æœ€å¾Œã«ã‚‚ã¨ã‚‚ã¨æŒ‡å®šã—ã¦ã„ãŸãƒ«ãƒ¼ãƒ«
      '@typescript-eslint/array-type': 'error',
      '@typescript-eslint/consistent-type-imports': 'error',
    },
  },
];
```

æ–‡ç« ã§èª¬æ˜ã™ã‚‹ã¨ã€`files`(ã¾ãŸã¯`ignores`)ã§æŒ‡å®šã—ãŸå€¤ã‚’ã€`extends`ã®å„ãƒ«ãƒ¼ãƒ«ã¨`extends`ä»¥å¤–ãã‚Œãã‚Œã«é©ç”¨ã—ã¦è¿”ã™ã¨ã„ã†ã‚‚ã®ã§ã™ã€‚è¿”ã‚Šå€¤ã¯`exntends`ã®æ•°+1ã®è¦ç´ æ•°ã‚’æŒã£ãŸé…åˆ—ã«ãªã‚Šã¾ã™ã€‚

å®Ÿè£…ã‚’ç¢ºèªã—ã¦ã¿ã‚‹ã¨ã‚ˆã‚Šåˆ†ã‹ã‚Šã‚„ã™ã„ã§ã™ã€‚ã“ã®ã‚ˆã†ãªçŸ­ã„é–¢æ•°ã«ãªã£ã¦ã„ã¾ã™ã€‚

https://github.com/typescript-eslint/typescript-eslint/blob/679ed8efacd0cdecc3daab8f5dd0625c1075afb9/packages/typescript-eslint/src/config-helper.ts#L85-L107

## 2. ãƒ«ãƒ¼ãƒ«ã‚’è¿½åŠ ã—ã¦ã„ã

ãƒ™ãƒ¼ã‚¹ã®è¨­å®šãŒã§ããŸã®ã§ã“ã“ã«ãƒ«ãƒ¼ãƒ«ã‚’è¿½åŠ ã—ã¦ã„ãã¾ã™ã€‚ä»Šå›ã¯ä½¿ç”¨ã—ãŸã„ãƒ©ã‚¤ãƒ–ãƒ©ãƒªãŒFlat configã«å¯¾å¿œã—ã¦ã„ã‚‹ã‹ã©ã†ã‹ã§ã‚„ã‚Šæ–¹ã‚’å¤‰ãˆã‚‹ã ã‘ã§ã—ãŸã€‚

æœ€çµ‚çš„ã«ã¯ã“ã®ã‚ˆã†ã«ãªã‚Šã¾ã—ãŸã€‚ã“ã ã‚ã£ãŸã¨ã“ã‚ã¨ã—ã¦ã¯ã€eslintã®æ¨å¥¨è¨­å®šã€jsãƒ•ã‚¡ã‚¤ãƒ«ã®ã¿ã‚’å¯¾è±¡ã¨ã—ãŸãƒ«ãƒ¼ãƒ«ã€tsãƒ•ã‚¡ã‚¤ãƒ«ã®ã¿ã‚’å¯¾è±¡ã¨ã—ãŸãƒ«ãƒ¼ãƒ«ã€ä¸¡æ–¹ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’å¯¾è±¡ã¨ã—ãŸãƒ«ãƒ¼ãƒ«ã€ã®é †ã§æ›¸ãã“ã¨ã§é…åˆ—ã®è¦ç´ ã‚’ã‚°ãƒ«ãƒ¼ãƒ”ãƒ³ã‚°ã—ã¦ã„ã‚‹ã“ã¨ã§ã™ã€‚

https://github.com/mkizka/eslint-config/blob/9d7d8190fce4ee3d0c762a4402da2db54da13c48/src/index.ts

## 3. Flat configã«å¯¾å¿œã—ã¦ã„ãªã„ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’peerDependenciesã«ç§»å‹•ã™ã‚‹

