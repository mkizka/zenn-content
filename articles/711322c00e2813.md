---
title: "pnpmã§ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ãŸRemixã§dotenvã‚’ä½¿ã†"
emoji: "ğŸ˜Š"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: ["remix", "pnpm"]
published: false
---

## çµè«–

dotenv ã§ã¯ãªã dotenv-cli ã‚’ä½¿ã†ã¨å‹•ä½œã—ã¾ã™ã€‚

```json
{
  "scripts": {
    "dev": "dotenv -- remix dev"
  }
}
```

https://www.npmjs.com/package/dotenv-cli

ä»¥ä¸‹ã€çµè«–ä»¥å¤–ã®è©±ã‚’æ›¸ãã¾ã™ã€‚

## ç¾çŠ¶

Remix è‡ªä½“ã«ã¯.env ã‚’ã‚µãƒãƒ¼ãƒˆã™ã‚‹æ©Ÿèƒ½ãŒãªã„ãŸã‚ã€.env ãƒ•ã‚¡ã‚¤ãƒ«ã§ç’°å¢ƒå¤‰æ•°ã‚’è¨­å®šã—ãŸã„å ´åˆã¯ dotenv ã‚’ä½¿ã†ã‚ˆã†[å…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ](https://remix.run/docs/en/v1/guides/envvars)ã«ã¯æ›¸ã‹ã‚Œã¦ã„ã¾ã™ã€‚

ã—ã‹ã—ã€pnpm ã§ã¯ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆé€šã‚Šã«ã‚„ã£ã¦ã‚‚å‹•ä½œã›ãšã€ä»¥ä¸‹ã®ã‚ˆã†ãªã‚¨ãƒ©ãƒ¼ãŒå‡ºã¾ã™ã€‚

```
$ pnpm dev

> remix-app-template@ dev /path/to/my-remix-app
> node -r dotenv/config node_modules/.bin/remix dev

/path/to/my-remix-app/node_modules/.bin/remix:2
basedir=$(dirname "$(echo "$0" | sed -e 's,\\,/,g')")
          ^^^^^^^

SyntaxError: missing ) after argument list
    at Object.compileFunction (node:vm:352:18)
    at wrapSafe (node:internal/modules/cjs/loader:1031:15)
    at Module._compile (node:internal/modules/cjs/loader:1065:27)
    at Object.Module._extensions..js (node:internal/modules/cjs/loader:1153:10)
    at Module.load (node:internal/modules/cjs/loader:981:32)
    at Function.Module._load (node:internal/modules/cjs/loader:822:12)
    at Function.executeUserEntryPoint [as runMain] (node:internal/modules/run_main:81:12)
    at node:internal/main/run_main_module:17:47
â€‰ERRORâ€‰ Command failed with exit code 1.
```

ã“ã‚Œã«ã¤ã„ã¦ Issue ãŒä½œæˆã•ã‚Œã¦ã„ã¾ã™ã€‚

https://github.com/remix-run/remix/issues/914

ã‚³ãƒ¡ãƒ³ãƒˆã§ã¯`dev`ã‚³ãƒãƒ³ãƒ‰ã§`node_modules/.bin/remix`ã§ã¯ãªã`node_modules/@remix-run/dev/cli.js`ã‚’æŒ‡å®šã™ã‚‹ã¨ã„ã†æ›¸ãè¾¼ã¿ã‚‚ã‚ã‚Šã¾ã™ã€‚

å®Ÿè¡Œã¯ã§ãã¾ã™ãŒã€ãƒ–ãƒ©ã‚¦ã‚¶ã§ã‚¢ã‚¯ã‚»ã‚¹ã™ã‚‹ã¨åˆ¥ã®ã‚¨ãƒ©ãƒ¼ãŒå‡ºã¾ã—ãŸã€‚

```
Error: Cannot find module '@remix-run/server-runtime'
```

## ã‚¨ãƒ©ãƒ¼ã®åŸå› 

ç¢ºèªã—ãŸã¨ã“ã‚ã€npm/yarn ã¨ pnpm ã§`node_modules/.bin`ä»¥ä¸‹ã«ä½œæˆã•ã‚Œã‚‹ãƒ•ã‚¡ã‚¤ãƒ«ãŒç•°ãªã‚‹ã‚ˆã†ã§ã™ã€‚

npm/yarn ã§ã¯`#!/usr/bin/env node`ã‹ã‚‰å§‹ã¾ã‚‹ JavaScript ãƒ•ã‚¡ã‚¤ãƒ«ãŒç½®ã‹ã‚Œã¦ã„ã¾ã™ãŒã€pnpm ã§ã¯`#!/bin/sh`ã‹ã‚‰å§‹ã¾ã‚‹ã‚·ã‚§ãƒ«ã‚¹ã‚¯ãƒªãƒ—ãƒˆã«ãªã£ã¦ã„ã¾ã™ã€‚

ã¤ã¾ã‚Šã€ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã«æ›¸ã‹ã‚ŒãŸã‚³ãƒãƒ³ãƒ‰`node -r dotenv/config node_modules/.bin/remix dev`ã§ã¯ pnpm ã§ä½œæˆã•ã‚ŒãŸã‚·ã‚§ãƒ«ã‚¹ã‚¯ãƒªãƒ—ãƒˆãŒ node ã«æ¸¡ã•ã‚Œã¦ã—ã¾ã£ã¦ãŠã‚Šã€ã‚¨ãƒ©ãƒ¼ã«ãªã£ã¦ã„ã‚‹ã¨åˆ†ã‹ã‚Šã¾ã™ã€‚

## è§£æ±ºç­–

ãªã‚“ã¨ãªãã€Œdotenv cliã€ã¨ã‹ã§èª¿ã¹ã¦ã¿ãŸã‚‰ dotenv-cli ãŒå‡ºã¦ãã¦ã€ã“ã‚Œä½¿ã£ãŸå‹•ãã¾ã—ãŸã€‚ãŠã‚ã‚Šã€‚
